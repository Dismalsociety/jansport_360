import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# STEP 1: Load original data
print("Loading data...")
df = pd.read_excel('stretched_training_data.xlsx')
times = df['Time (s)'].values
flows = df['Flow Rate (gpm)'].values

# Create a sine wave (Hz)
SINE_FREQUENCY = .1  

# Create sine wave values
sine_values = np.sin(2 * np.pi * SINE_FREQUENCY * times)

# Use flow rate as amplitude
new_flows = flows * sine_values

# Use absolute value
new_flows = np.abs(new_flows)

# Save new data
new_df = pd.DataFrame({
    'Time (s)': times,
    'Flow Rate (gpm)': new_flows,
})

new_df.to_excel('sine_wave_training_data.xlsx', index=False)
print("Saved to sine_wave_training_data.xlsx")
